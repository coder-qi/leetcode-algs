package weekly.w292;

/**
 * 6058. 统计打字方案数：https://leetcode-cn.com/problems/count-number-of-texts/
 */
public class CountNumberOfTexts {

    static final int MOD = 1000000007;

    public int countTexts(String pressedKeys) {
        int n = pressedKeys.length();
        int[] f = new int[n + 1], g = new int[n + 1];
        f[0] = g[0] = 1;
        for (int i = 1; i <= n; i++) {
            for (int j = 1; j <= 3 && j <= i; j++) {
                f[i] = (f[i] + f[i - j]) % MOD;
            }
            for (int j = 1; j <= 4 && j <= i; j++) {
                g[i] = (g[i] + g[i - j]) % MOD;
            }
        }

        long ans = 1;
        for (int i = 0; i < n;) {
            char ch = pressedKeys.charAt(i);
            int j = i + 1;
            while (j < n && pressedKeys.charAt(j) == ch) {
                j++;
            }
            ans = ans * (ch == '7' || ch == '9' ? g[j - i] : f[j - i]) % MOD;
            i = j;
        }
        return (int) ans;
    }

    public static void main(String[] args) {
        // 8
        System.out.println(new CountNumberOfTexts().countTexts("22233"));
        // 82876089
        System.out.println(new CountNumberOfTexts().countTexts("222222222222222222222222222222222222"));
        // 537551452
        System.out.println(new CountNumberOfTexts().countTexts("444444444444444444444444444444448888888888888888999999999999333333333333333366666666666666662222222222222222666666666666666633333333333333338888888888888888222222222222222244444444444444448888888888888222222222222222288888888888889999999999999999333333333444444664"));
        // 886136986
        System.out.println(new CountNumberOfTexts().countTexts("88888888888888888888888888888999999999999999999999999999994444444444444444444444444444488888888888888888888888888888555555555555555555555555555556666666666666666666666666666666666666666666666666666666666222222222222222222222222222226666666666666666666666666666699999999999999999999999999999888888888888888888888888888885555555555555555555555555555577777777777777777777777777777444444444444444444444444444444444444444444444444444444444433333333333333333333333333333555555555555555555555555555556666666666666666666666666666644444444444444444444444444444999999999999999999999999999996666666666666666666666666666655555555555555555555555555555444444444444444444444444444448888888888888888888888888888855555555555555555555555555555555555555555555555555555555555555555555555555555555555999999999999999555555555555555555555555555554444444444444444444444444444444555"));
    }

}
